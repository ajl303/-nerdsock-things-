{"_id":"Q4VQkzPoeDaPQrtk","name":"BigDeflectSequence","type":"script","author":"gN2IS1aOvb93eNAA","img":"icons/svg/sword.svg","scope":"global","command":"//get target to derive direction\nlet target = game.user.targets.values().next().value;\nif(target == undefined || target == null){\n\tui.notifications.error(\"Please select a target.\");\n\tgame.macros.getName(\"Lagomorph\").execute();\n\treturn;\n}\nif(game.canvas.tokens.controlled.length > 1 || game.canvas.tokens.controlled.length < 1){\n\tui.notifications.error(\"Please select exactly one token.\");\n\tgame.macros.getName(\"Lagomorph\").execute();\n\treturn;\n}\nlet centerer = game.canvas.grid.size/2;\nlet tx = target.data.x;\nlet ty = target.data.y;\nlet caster = game.canvas.tokens.controlled[0];\nlet cx = caster.data.x;\nlet cy = caster.data.y;\n\n/* determine the relative positions of the defender and\n   attack, then place the animation accordingly */\nlet ix = tx - cx;\nlet iy = ty - cy;\n\nif(ix > 0){\n\tix = cx + canvas.grid.size;\n} else if (ix < 0){\n\tix = cx;\n} else {\n\tix = cx + canvas.grid.size/2;\n}\n\nif(iy > 0){\n\tiy = cy + canvas.grid.size;\n} else if (iy < 0){\n\tiy = cy;\n} else {\n\tiy = cy + canvas.grid.size/2;\n}\n\n//randomly select a valid deflect sound\nlet ting = Math.floor(Math.random() * 3)+1;\t\n\nlet test = new Sequence()\n\n\t//ting sound\n\t.sound(\"SFX/Sekiro/BigDeflect{{sound}}.ogg\")\n\t\t.volume(0.2)\n\t\t.setMustache({\"sound\": () => {return ting}})\n\t//animation\n\t.effect()\n\t\t.file(\"modules/JB2A_DnD5e/Library/Generic/Impact/Impact_02_Regular_Blue_400x400.webm\")\n\t\t.atLocation({x: ix, y: iy})\n\t\t.scale(0.2)\n\t\t.randomOffset(0.5)\n\t\t.randomRotation()\n\t.play();","folder":null,"sort":0,"permission":{"default":0,"gN2IS1aOvb93eNAA":3},"flags":{"advanced-macros":{"runAsGM":false},"core":{"sourceId":"Macro.KrmwoEY33pecJpd7"}}}
{"_id":"UjHrf2tpPaSTCsZq","name":"BiggestDeflectSequence","type":"script","author":"gN2IS1aOvb93eNAA","img":"icons/svg/sword.svg","scope":"global","command":"//get target to derive direction\nlet target = game.user.targets.values().next().value;\nif(target == undefined || target == null){\n\tui.notifications.error(\"Please select a target.\");\n\tgame.macros.getName(\"Lagomorph\").execute();\n\treturn;\n}\nif(game.canvas.tokens.controlled.length > 1 || game.canvas.tokens.controlled.length < 1){\n\tui.notifications.error(\"Please select exactly one token.\");\n\tgame.macros.getName(\"Lagomorph\").execute();\n\treturn;\n}\nlet centerer = game.canvas.grid.size/2;\nlet tx = target.data.x;\nlet ty = target.data.y;\nlet caster = game.canvas.tokens.controlled[0];\nlet cx = caster.data.x;\nlet cy = caster.data.y;\n\n/* determine the relative positions of the defender and\n   attack, then place the animation accordingly */\nlet ix = tx - cx;\nlet iy = ty - cy;\n\nif(ix > 0){\n\tix = cx + canvas.grid.size;\n} else if (ix < 0){\n\tix = cx;\n} else {\n\tix = cx + canvas.grid.size/2;\n}\n\nif(iy > 0){\n\tiy = cy + canvas.grid.size;\n} else if (iy < 0){\n\tiy = cy;\n} else {\n\tiy = cy + canvas.grid.size/2;\n}\n\nlet test = new Sequence()\n\n\t//ting sound\n\t.sound(\"SFX/Sekiro/BiggestDeflect.ogg\")\n\t\t.volume(0.2)\n\t//animation\n\t.effect()\n\t\t.file(\"modules/JB2A_DnD5e/Library/Generic/Impact/Impact_02_Regular_Blue_400x400.webm\")\n\t\t.atLocation({x: ix, y: iy})\n\t\t.scale(0.35)\n\t\t//.randomOffset(0.5)\n\t\t.randomRotation()\n\t\t//.playbackRate(0.02)\n\t\t//.endTimePerc(0.02)\n\t.play();","folder":null,"sort":0,"permission":{"default":0,"gN2IS1aOvb93eNAA":3},"flags":{"advanced-macros":{"runAsGM":false},"core":{"sourceId":"Macro.O3HTArC6k6HpzZNq"}}}
{"_id":"dxchMQmhGpWDB7LY","name":"SwordBlockSequence","type":"script","author":"gN2IS1aOvb93eNAA","img":"icons/svg/sword.svg","scope":"global","command":"//get target to derive direction\nlet target = game.user.targets.values().next().value;\nif(target == undefined || target == null){\n\tui.notifications.error(\"Please select a target.\");\n\tgame.macros.getName(\"Lagomorph\").execute();\n\treturn;\n}\nif(game.canvas.tokens.controlled.length > 1 || game.canvas.tokens.controlled.length < 1){\n\tui.notifications.error(\"Please select exactly one token.\");\n\tgame.macros.getName(\"Lagomorph\").execute();\n\treturn;\n}\nlet centerer = game.canvas.grid.size/2;\nlet tx = target.data.x;\nlet ty = target.data.y;\nlet caster = game.canvas.tokens.controlled[0];\nlet cx = caster.data.x;\nlet cy = caster.data.y;\n\n/* determine the relative positions of the defender and\n   attack, then place the animation accordingly */\nlet ix = tx - cx;\nlet iy = ty - cy;\n\nif(ix > 0){\n\tix = cx + canvas.grid.size;\n} else if (ix < 0){\n\tix = cx;\n} else {\n\tix = cx + canvas.grid.size/2;\n}\n\nif(iy > 0){\n\tiy = cy + canvas.grid.size;\n} else if (iy < 0){\n\tiy = cy;\n} else {\n\tiy = cy + canvas.grid.size/2;\n}\n\n//randomly select a valid deflect sound\nlet ting = Math.floor(Math.random() * 4)+1;\t\n\nlet test = new Sequence()\n\n\t//ting sound\n\t.sound(\"SFX/Sekiro/Block{{sound}}.ogg\")\n\t\t.volume(0.3)\n\t\t.setMustache({\"sound\": () => {return ting}})\n\t//animation\n\t.effect()\n\t\t.file(\"modules/JB2A_DnD5e/Library/Generic/Impact/Impact_02_Regular_Blue_400x400.webm\")\n\t\t.atLocation({x: ix, y: iy})\n\t\t.scale(0.1)\n\t\t.randomOffset(0.5)\n\t\t.randomRotation()\n\t.play();","folder":null,"sort":0,"permission":{"default":0,"gN2IS1aOvb93eNAA":3},"flags":{"advanced-macros":{"runAsGM":false},"core":{"sourceId":"Macro.o9PdxM5NsIxiLEIf"}}}
{"_id":"mMTFO28RaQvcXOWB","name":"DeflectSequence","type":"script","author":"gN2IS1aOvb93eNAA","img":"icons/svg/sword.svg","scope":"global","command":"//get target to derive direction\nlet target = game.user.targets.values().next().value;\nif(target == undefined || target == null){\n\tui.notifications.error(\"Please select a target.\");\n\tgame.macros.getName(\"Lagomorph\").execute();\n\treturn;\n}\nif(game.canvas.tokens.controlled.length > 1 || game.canvas.tokens.controlled.length < 1){\n\tui.notifications.error(\"Please select exactly one token.\");\n\tgame.macros.getName(\"Lagomorph\").execute();\n\treturn;\n}\nlet centerer = game.canvas.grid.size/2;\nlet tx = target.data.x;\nlet ty = target.data.y;\nlet caster = game.canvas.tokens.controlled[0];\nlet cx = caster.data.x;\nlet cy = caster.data.y;\n\n/* determine the relative positions of the defender and\n   attack, then place the animation accordingly */\nlet ix = tx - cx;\nlet iy = ty - cy;\n\nif(ix > 0){\n\tix = cx + canvas.grid.size;\n} else if (ix < 0){\n\tix = cx;\n} else {\n\tix = cx + canvas.grid.size/2;\n}\n\nif(iy > 0){\n\tiy = cy + canvas.grid.size;\n} else if (iy < 0){\n\tiy = cy;\n} else {\n\tiy = cy + canvas.grid.size/2;\n}\n\n//randomly select a valid deflect sound\nlet ting = Math.floor(Math.random() * 6)+1;\t\n\nlet test = new Sequence()\n\n\t//ting sound\n\t.sound(\"SFX/Sekiro/Deflect{{sound}}.ogg\")\n\t\t.volume(0.2)\n\t\t.setMustache({\"sound\": () => {return ting}})\n\t//animation\n\t.effect()\n\t\t.file(\"modules/JB2A_DnD5e/Library/Generic/Impact/Impact_02_Regular_Blue_400x400.webm\")\n\t\t.atLocation({x: ix, y: iy})\n\t\t.scale(0.1)\n\t\t.randomOffset(0.5)\n\t\t.randomRotation()\n\t.play();","folder":null,"sort":0,"permission":{"default":0,"gN2IS1aOvb93eNAA":3},"flags":{"advanced-macros":{"runAsGM":false},"core":{"sourceId":"Macro.1nxkDq7KMYbLJS5G"}}}
